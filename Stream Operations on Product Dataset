import java.util.*;
import java.util.stream.*;
import java.util.Comparator;

class Product {
    String name;
    double price;
    String category;

    public Product(String name, double price, String category) {
        this.name = name;
        this.price = price;
        this.category = category;
    }

    @Override
    public String toString() {
        return name + " | " + category + " | ₹" + price;
    }
}

public class ProductAnalytics {
    public static void main(String[] args) {
        List<Product> products = Arrays.asList(
                new Product("Laptop", 60000, "Electronics"),
                new Product("Phone", 35000, "Electronics"),
                new Product("TV", 45000, "Electronics"),
                new Product("Sofa", 20000, "Furniture"),
                new Product("Chair", 5000, "Furniture"),
                new Product("Table", 12000, "Furniture"),
                new Product("Shirt", 1500, "Clothing"),
                new Product("Jacket", 4000, "Clothing")
        );

        // Group products by category
        System.out.println("\nGrouped by Category:");
        Map<String, List<Product>> grouped = products.stream()
                .collect(Collectors.groupingBy(p -> p.category));
        grouped.forEach((cat, list) -> {
            System.out.println(cat + ": " + list);
        });

        // Most expensive product in each category
        System.out.println("\nMost Expensive Product in Each Category:");
        Map<String, Optional<Product>> maxByCategory = products.stream()
                .collect(Collectors.groupingBy(
                        p -> p.category,
                        Collectors.maxBy(Comparator.comparingDouble(p -> p.price))
                ));
        maxByCategory.forEach((cat, prod) -> 
            System.out.println(cat + ": " + prod.orElse(null))
        );

        // Average price of all products
        double avgPrice = products.stream()
                .collect(Collectors.averagingDouble(p -> p.price));
        System.out.println("\nAverage Price of All Products: ₹" + avgPrice);
    }
}
